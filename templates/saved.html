<!DOCTYPE html>
<html lang="en">

<head>
    <title>Byte Beat</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous" />
    
    <!--Load the Stylesheet-->
    <link rel="stylesheet" href="static/style.css">

    <!--Load the Functions needed for page-->
    <script src="static/unsaveArticle.js"></script>
    <script src="static/saveArticle.js"></script>
    <script src="static/toggleButton.js"></script>
    <script src="static/darkMode.js"></script>

</head>

<body>
    <div class="container">

        <img class="img-fluid align-top align-left" id="banner" src="http://127.0.0.1:5000/static/BB LOGO.jpeg"
            alt="img not found" />

        <nav class="navbar">
            <div class="btn-group">
                <a class="btn navbar-btn" href="http://127.0.0.1:5000/">Back</a>
                <button type="button" class="btn navbar-btn" data-bs-theme-value="light"
                    aria-label="Switch to light mode">Light</button>
                <button type="button" class="btn navbar-btn" data-bs-theme-value="dark"
                    aria-label="Switch to dark mode">Dark</button>
            </div>
        </nav>

        <div class="row" id="card-container">
            <!--Loads all the saved articles-->
            <script>
                const saved = JSON.parse(localStorage.getItem("savedArticles")) || [];
                // Generate HTML code for the saved card
                const articleBody = document.querySelector("#card-container");
                // Loop through data and create cards
                saved.forEach((article) => {
                    // Create card elements
                    const cardCol = document.createElement("div");
                    const card = document.createElement("div");
                    const cardBody = document.createElement("div");
                    const img = document.createElement("img");
                    const title = document.createElement("h5");
                    const cardBottom = document.createElement("div");
                    const link = document.createElement("a");
                    const input = document.createElement("input");

                    // Set card classes
                    cardCol.classList.add("card-group", "d-flex", "flex-wrap", "justify-content-center", "col-md-6");
                    card.classList.add("card", "mb-6");
                    cardBody.classList.add("card-body", "d-flex", "flex-column");
                    cardBottom.classList.add("mt-auto");

                    // Set card content
                    img.classList.add("card-img-top");
                    // add a placeholder image if the article does not have an image
                    if (article.urlToImage == null || article.urlToImage == "null") {
                        img.src = "http://127.0.0.1:5000/static/placeholder.png";
                    } else {
                        img.src = article.urlToImage;
                    };
                    img.alt = "Image not found.";
                    title.innerText = article.title;
                    link.classList.add("card-link", "btn", "btn-secondary");
                    link.href = article.url;
                    link.target = "_blank";
                    link.innerText = "Go to Link";
                    input.classList.add("card-link", "btn", "btn-warning", "float-end", "article-remove");
                    input.type = "button";
                    input.id = article.title;
                    input.value = "Unsave";
                    input.onclick = function () { toggleButton(article.title, article.url, article.urlToImage, input.value) };

                    // Append card elements to parent
                    cardBody.appendChild(title);
                    // Append buttons to card bottom
                    cardBottom.appendChild(link);
                    cardBottom.appendChild(input);
                    // Append card bottom to card body
                    cardBody.appendChild(cardBottom);

                    // Append card to parent
                    card.appendChild(img);
                    card.appendChild(cardBody);
                    cardCol.appendChild(card);

                    // Append card to parent
                    articleBody.appendChild(cardCol);
                });
            </script>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>
</body>

</html>